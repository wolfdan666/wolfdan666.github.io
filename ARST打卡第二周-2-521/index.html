<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon32.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon16.ico">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"www.wolfdan.cn","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.8.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>
<meta name="description" content="ARST打卡 基于上下文的自适应算术编码代码实现 完全统计模型的算术编码代码实现 无限长不报错版">
<meta property="og:type" content="article">
<meta property="og:title" content="ARST打卡第二周(2&#x2F;521)">
<meta property="og:url" content="https://www.wolfdan.cn/ARST%E6%89%93%E5%8D%A1%E7%AC%AC%E4%BA%8C%E5%91%A8-2-521/">
<meta property="og:site_name" content="单林敏的博客">
<meta property="og:description" content="ARST打卡 基于上下文的自适应算术编码代码实现 完全统计模型的算术编码代码实现 无限长不报错版">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2019-05-05T08:24:09.000Z">
<meta property="article:modified_time" content="2020-09-13T13:42:58.771Z">
<meta property="article:author" content="单林敏">
<meta property="article:tag" content="ARST">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://www.wolfdan.cn/ARST%E6%89%93%E5%8D%A1%E7%AC%AC%E4%BA%8C%E5%91%A8-2-521/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://www.wolfdan.cn/ARST%E6%89%93%E5%8D%A1%E7%AC%AC%E4%BA%8C%E5%91%A8-2-521/","path":"ARST打卡第二周-2-521/","title":"ARST打卡第二周(2/521)"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>ARST打卡第二周(2/521) | 单林敏的博客</title>
  

  <script src="/js/third-party/analytics/baidu-analytics.js"></script>
  <script async src="https://hm.baidu.com/hm.js?953c0cc2db0f1124313d72b95b9d07e1"></script>



  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">单林敏的博客</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">wolfdan's blog</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
        <li class="menu-item menu-item-捐赠"><a href="/%E6%8D%90%E8%B5%A0/" rel="section"><i class="fa fa-coins fa-fw"></i>捐赠</a></li>
        <li class="menu-item menu-item-冲冲"><a href="/%E5%86%B2%E5%86%B2%E5%86%B2/" rel="section"><i class="fa fa-rocket fa-fw"></i>冲冲</a></li>
        <li class="menu-item menu-item-友链"><a href="/links/" rel="section"><i class="fa fa-link fa-fw"></i>友链</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#ARST%E7%AC%AC%E4%BA%8C%E5%91%A8-2-521"><span class="nav-number">1.</span> <span class="nav-text">ARST第二周(2&#x2F;521)</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Algorithm"><span class="nav-number">1.1.</span> <span class="nav-text">Algorithm:</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Review-%E4%B8%BA%E4%BA%86%E5%AD%A6%E4%B9%A0%E8%8B%B1%E6%96%87"><span class="nav-number">1.2.</span> <span class="nav-text">Review:(为了学习英文)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Tip-%E4%B8%BB%E8%A6%81%E6%98%AF%E4%B8%BA%E4%BA%86%E6%80%BB%E7%BB%93%E5%92%8C%E5%BD%92%E7%BA%B3%E4%BD%A0%E5%9C%A8%E6%98%AF%E5%B8%B8%E5%B7%A5%E4%BD%9C%E4%B8%AD%E6%89%80%E9%81%87%E5%88%B0%E7%9A%84%E7%9F%A5%E8%AF%86%E7%82%B9"><span class="nav-number">1.3.</span> <span class="nav-text">Tip:(主要是为了总结和归纳你在是常工作中所遇到的知识点)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Share%EF%BC%9A"><span class="nav-number">1.4.</span> <span class="nav-text">Share：</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E5%9F%BA%E4%BA%8E%E4%B8%8A%E4%B8%8B%E6%96%87%E7%9A%84%E8%87%AA%E9%80%82%E5%BA%94%E7%AE%97%E6%9C%AF%E7%BC%96%E7%A0%81%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0"><span class="nav-number">1.4.1.</span> <span class="nav-text">1.基于上下文的自适应算术编码代码实现</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E5%AE%8C%E5%85%A8%E7%BB%9F%E8%AE%A1%E6%A8%A1%E5%9E%8B%E7%9A%84%E7%AE%97%E6%9C%AF%E7%BC%96%E7%A0%81%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0"><span class="nav-number">1.4.2.</span> <span class="nav-text">2.完全统计模型的算术编码代码实现</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E5%AE%8C%E5%85%A8%E7%BB%9F%E8%AE%A1%E6%A8%A1%E5%9E%8B%E7%9A%84%E7%AE%97%E6%9C%AF%E7%BC%96%E7%A0%81%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0%E2%80%93%E6%97%A0%E9%99%90%E9%95%BF%E4%B8%8D%E6%8A%A5%E9%94%99%E7%89%88"><span class="nav-number">1.4.3.</span> <span class="nav-text">3.完全统计模型的算术编码代码实现–无限长不报错版</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%9B%B4%E6%96%B0"><span class="nav-number">2.</span> <span class="nav-text">更新</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="单林敏"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">单林敏</p>
  <div class="site-description" itemprop="description">心外无物,知行合一</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">226</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">32</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">93</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/wolfdan666" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;wolfdan666" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:wolfdan666666@gmail.com" title="E-Mail → mailto:wolfdan666666@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.zhihu.com/people/shanlinmin/activities" title="知乎 → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;shanlinmin&#x2F;activities" rel="noopener" target="_blank"><i class="free-code-camp fa-fw"></i>知乎</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.jianshu.com/u/53acec957bf9" title="简书 → https:&#x2F;&#x2F;www.jianshu.com&#x2F;u&#x2F;53acec957bf9" rel="noopener" target="_blank"><i class="book fa-fw"></i>简书</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://me.csdn.net/neve_give_up_dan" title="CSDN → https:&#x2F;&#x2F;me.csdn.net&#x2F;neve_give_up_dan" rel="noopener" target="_blank"><i class="rotate-right fa-fw"></i>CSDN</a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://www.wolfdan.cn/ARST%E6%89%93%E5%8D%A1%E7%AC%AC%E4%BA%8C%E5%91%A8-2-521/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="单林敏">
      <meta itemprop="description" content="心外无物,知行合一">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="单林敏的博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          ARST打卡第二周(2/521)
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-05-05 16:24:09" itemprop="dateCreated datePublished" datetime="2019-05-05T16:24:09+08:00">2019-05-05</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2020-09-13 21:42:58" itemprop="dateModified" datetime="2020-09-13T21:42:58+08:00">2020-09-13</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/ARST/" itemprop="url" rel="index"><span itemprop="name">ARST</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
</div>

            <div class="post-description">ARST打卡 基于上下文的自适应算术编码代码实现 完全统计模型的算术编码代码实现 无限长不报错版</div>
        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h1 id="ARST第二周-2-521"><a href="#ARST第二周-2-521" class="headerlink" title="ARST第二周(2/521)"></a>ARST第二周(2/521)</h1><h2 id="Algorithm"><a href="#Algorithm" class="headerlink" title="Algorithm:"></a>Algorithm:</h2><p><a target="_blank" rel="noopener" href="https://github.com/wolfdan666/WolfEat3moreMeatEveryday/tree/master/2019.5/2019.5.2">第二周LeetCode</a></p>
<h2 id="Review-为了学习英文"><a href="#Review-为了学习英文" class="headerlink" title="Review:(为了学习英文)"></a>Review:(为了学习英文)</h2><p>Consider how our digital content consumption works today. Some people consume free music and TV shows daily via pirated files, illegal streams. Some consume digital content via legal, publicly-funded radio and TV station streams. Others pay for the privilege to access highly curated and secure services like Spotify, Pandora, Netflix, Hulu, and others. AR clouds will be no different.So how will we choose? I think the answer is security and convenience.</p>
<p>我也认为将来全面上云之后盗版资源的安全隐患会变得极其巨大，所以必须做好安全防范，最好购买服务，但是同时也最好要照顾世界上的弱势群体</p>
<p>Don’t Be Evil！</p>
<p><a target="_blank" rel="noopener" href="https://medium.com/@NextRealityNews/the-future-of-the-ar-cloud-a-thousand-walled-gardens-bloom-54426fe36b8b?KGa=true">The Future of the AR Cloud — a Thousand Walled Gardens Bloom</a></p>
<h2 id="Tip-主要是为了总结和归纳你在是常工作中所遇到的知识点"><a href="#Tip-主要是为了总结和归纳你在是常工作中所遇到的知识点" class="headerlink" title="Tip:(主要是为了总结和归纳你在是常工作中所遇到的知识点)"></a>Tip:(主要是为了总结和归纳你在是常工作中所遇到的知识点)</h2><p>安装VMware15Pro，在上面安装CentOS7，并设置NAT联网(以及kexue就不说了，自行学习)<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/zouhuu/article/details/85794779">安装VMware15Pro</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/zouhuu/article/details/86530787">VMware15上安装CentOS7</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/wangmx1993328/article/details/80897533">设置NAT联网</a></p>
<h2 id="Share："><a href="#Share：" class="headerlink" title="Share："></a>Share：</h2><h3 id="1-基于上下文的自适应算术编码代码实现"><a href="#1-基于上下文的自适应算术编码代码实现" class="headerlink" title="1.基于上下文的自适应算术编码代码实现"></a>1.基于上下文的自适应算术编码代码实现</h3><p>设信源可能输出的符号是a, b, c 三个字母，构成一个二阶Markov信源，且各阶条件概率如下，试编写程序可以对任意字母序列（如abbcabcb）进行基于上下文的自适应算术编码，并进行相应的译码。<br>思路:建立合适的映射表，然后对一个字符和两个字符的时候进行特殊讨论.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 设信源可能输出的符号是a, b, c 三个字母，构成一个二阶Markov信源，且各阶条件概率如下，</span></span><br><span class="line"><span class="comment">// 试编写程序可以对任意字母序列（如abbcabcb）进行基于上下文的自适应算术编码，并进行相应的译码。</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">// 经过研究发现，长度变长的时候会出现不相等的情况，分析得知，是因为算法本身的概率选取的调整问题double tp = 0.01*be + 0.99*end;</span></span><br><span class="line"><span class="comment">// 选取时应该把tp调整到大区间段(个人猜测，不会证明，但可以写一个循环自动化调参训练...当在某个长度(input)上面达到某个精度的时候输出参数)</span></span><br><span class="line"><span class="comment">// input : length  先建立 length 长的全 a 序列, length重循环  最后一个从 a+0到+1到+2(最内层),每个外层一变化都要变化一次,O(3^length)指数爆炸</span></span><br><span class="line"><span class="comment">for(double i=0.01;i&lt;1.00;i+=0.01)&#123;</span></span><br><span class="line"><span class="comment">    for()// length重for3循环，后面计算  sumOf((s&lt;t)||(s&gt;t)) / 3^length  错误率...维护错误率min的i值 看i为多少的时候l错误率最低</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">发现还有是精度问题，如果p后面变得很小的时候，那判断的时候很可能去掉几位判断</span></span><br><span class="line"><span class="comment">最近这几天事情比较多，所以就不写高精度的小数计算了</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line">string s,ans,t;</span><br><span class="line"><span class="keyword">double</span> table[<span class="number">4</span>][<span class="number">4</span>][<span class="number">4</span>];<span class="comment">// eg: c/ab [1][2][3]   c/a [1][3][0]  a [1][0][0]</span></span><br><span class="line"><span class="keyword">int</span> sl;<span class="comment">// s 的长度</span></span><br><span class="line"><span class="keyword">int</span> l; <span class="comment">// 码符号长度</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Init</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">3</span>;i++)&#123;</span><br><span class="line">        table[i][<span class="number">0</span>][<span class="number">0</span>] = <span class="number">1</span>/<span class="number">3.0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;<span class="number">4</span>;i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;<span class="number">4</span>;j++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(i==j) table[i][j][<span class="number">0</span>]=<span class="number">0.5</span>;</span><br><span class="line">            <span class="keyword">else</span> table[i][j][<span class="number">0</span>]=<span class="number">0.25</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 有点机械，还好sublime有多点编辑</span></span><br><span class="line">    table[<span class="number">1</span>][<span class="number">1</span>][<span class="number">1</span>]=<span class="number">3</span>/<span class="number">5.0</span>;    table[<span class="number">1</span>][<span class="number">1</span>][<span class="number">2</span>]=<span class="number">1</span>/<span class="number">5.0</span>;    table[<span class="number">1</span>][<span class="number">1</span>][<span class="number">3</span>]=<span class="number">1</span>/<span class="number">5.0</span>;</span><br><span class="line">    table[<span class="number">1</span>][<span class="number">2</span>][<span class="number">1</span>]=<span class="number">1</span>/<span class="number">4.0</span>;    table[<span class="number">1</span>][<span class="number">2</span>][<span class="number">2</span>]=<span class="number">1</span>/<span class="number">4.0</span>;    table[<span class="number">1</span>][<span class="number">2</span>][<span class="number">3</span>]=<span class="number">1</span>/<span class="number">2.0</span>;</span><br><span class="line">    table[<span class="number">1</span>][<span class="number">3</span>][<span class="number">1</span>]=<span class="number">1</span>/<span class="number">4.0</span>;    table[<span class="number">1</span>][<span class="number">3</span>][<span class="number">2</span>]=<span class="number">1</span>/<span class="number">4.0</span>;    table[<span class="number">1</span>][<span class="number">3</span>][<span class="number">3</span>]=<span class="number">1</span>/<span class="number">2.0</span>;</span><br><span class="line">    table[<span class="number">2</span>][<span class="number">1</span>][<span class="number">1</span>]=<span class="number">1</span>/<span class="number">2.0</span>;    table[<span class="number">2</span>][<span class="number">1</span>][<span class="number">2</span>]=<span class="number">1</span>/<span class="number">4.0</span>;    table[<span class="number">2</span>][<span class="number">1</span>][<span class="number">3</span>]=<span class="number">1</span>/<span class="number">4.0</span>;</span><br><span class="line">    table[<span class="number">2</span>][<span class="number">2</span>][<span class="number">1</span>]=<span class="number">1</span>/<span class="number">5.0</span>;    table[<span class="number">2</span>][<span class="number">2</span>][<span class="number">2</span>]=<span class="number">3</span>/<span class="number">5.0</span>;    table[<span class="number">2</span>][<span class="number">2</span>][<span class="number">3</span>]=<span class="number">1</span>/<span class="number">5.0</span>;</span><br><span class="line">    table[<span class="number">2</span>][<span class="number">3</span>][<span class="number">1</span>]=<span class="number">1</span>/<span class="number">4.0</span>;    table[<span class="number">2</span>][<span class="number">3</span>][<span class="number">2</span>]=<span class="number">1</span>/<span class="number">4.0</span>;    table[<span class="number">2</span>][<span class="number">3</span>][<span class="number">3</span>]=<span class="number">1</span>/<span class="number">2.0</span>;</span><br><span class="line">    table[<span class="number">3</span>][<span class="number">1</span>][<span class="number">1</span>]=<span class="number">1</span>/<span class="number">2.0</span>;    table[<span class="number">3</span>][<span class="number">1</span>][<span class="number">2</span>]=<span class="number">1</span>/<span class="number">4.0</span>;    table[<span class="number">3</span>][<span class="number">1</span>][<span class="number">3</span>]=<span class="number">1</span>/<span class="number">4.0</span>;</span><br><span class="line">    table[<span class="number">3</span>][<span class="number">2</span>][<span class="number">1</span>]=<span class="number">1</span>/<span class="number">2.0</span>;    table[<span class="number">3</span>][<span class="number">2</span>][<span class="number">2</span>]=<span class="number">1</span>/<span class="number">4.0</span>;    table[<span class="number">3</span>][<span class="number">2</span>][<span class="number">3</span>]=<span class="number">1</span>/<span class="number">4.0</span>;</span><br><span class="line">    table[<span class="number">3</span>][<span class="number">3</span>][<span class="number">1</span>]=<span class="number">1</span>/<span class="number">5.0</span>;    table[<span class="number">3</span>][<span class="number">3</span>][<span class="number">2</span>]=<span class="number">1</span>/<span class="number">5.0</span>;    table[<span class="number">3</span>][<span class="number">3</span>][<span class="number">3</span>]=<span class="number">3</span>/<span class="number">5.0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">encord</span><span class="params">()</span></span>&#123;<span class="comment">// 老师用be end 算 len (概率长度) ,我觉得用p (概率长度) 算前后更方便</span></span><br><span class="line">    <span class="comment">// 维护 p ,be , end , 之后用be ，end算出概率，p算出编码长度,之后便可以编码</span></span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;编码开始&quot;</span>&lt;&lt;endl;</span><br><span class="line">    <span class="keyword">int</span> n = <span class="built_in"><span class="keyword">int</span></span>(s.<span class="built_in">length</span>());</span><br><span class="line">    <span class="keyword">double</span> be = <span class="number">0.0</span>,end = <span class="number">1.0</span>;</span><br><span class="line">    <span class="keyword">double</span> p = <span class="number">1.0</span>;</span><br><span class="line">    <span class="keyword">int</span> k = s[<span class="number">0</span>] - <span class="string">&#x27;a&#x27;</span> + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> kp=<span class="number">0</span>,kpp=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(i==<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(k==<span class="number">1</span>)&#123;end = <span class="number">1</span>/<span class="number">3.0</span>;&#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(k==<span class="number">2</span>)&#123; be = <span class="number">1</span>/<span class="number">3.0</span>; end = <span class="number">2</span>/<span class="number">3.0</span>;&#125;</span><br><span class="line">            <span class="keyword">else</span> be = <span class="number">2</span>/<span class="number">3.0</span>;</span><br><span class="line">            p = <span class="number">1</span>/<span class="number">3.0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(i==<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="comment">// kp = s[i-1] - &#x27;a&#x27; + 1;/// 我也是醉了，昨天状态不佳的时候写了多少bug，我以后再在状态不好时写代码我是狗</span></span><br><span class="line">            kp = k;</span><br><span class="line">            k = s[i] - <span class="string">&#x27;a&#x27;</span> + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(k==<span class="number">1</span>)&#123;</span><br><span class="line">                p *= table[kp][k][<span class="number">0</span>];</span><br><span class="line">                end = be + p;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(k==<span class="number">2</span>)&#123;</span><br><span class="line">                be += p*table[kp][k<span class="number">-1</span>][<span class="number">0</span>];</span><br><span class="line">                p *= table[kp][k][<span class="number">0</span>];</span><br><span class="line">                <span class="comment">// p *= table[kp][k][0];  // 昨天写的bug 真牛逼..</span></span><br><span class="line">                <span class="comment">// be += table[kp][k-1][0];</span></span><br><span class="line">                end = be + p;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                p *= table[kp][k][<span class="number">0</span>];</span><br><span class="line">                be = end - p;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            kpp = kp;</span><br><span class="line">            kp = k;</span><br><span class="line">            <span class="comment">// kp = s[i-1] - &#x27;a&#x27; + 1;// 昨天的bug</span></span><br><span class="line">            <span class="comment">// kpp = s[i-2] - &#x27;a&#x27; + 1;</span></span><br><span class="line">            k = s[i] - <span class="string">&#x27;a&#x27;</span> + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(k==<span class="number">1</span>)&#123;</span><br><span class="line">                p *= table[kpp][kp][k];</span><br><span class="line">                end = be + p;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(k==<span class="number">2</span>)&#123;</span><br><span class="line">                <span class="comment">// p *= table[kpp][kp][k];</span></span><br><span class="line">                <span class="comment">// be += table[kpp][kp][k-1];// 这里有bug</span></span><br><span class="line">                <span class="comment">// end = be + p;</span></span><br><span class="line">                be += p*table[kpp][kp][k<span class="number">-1</span>];<span class="comment">// 原来的长度*第一段</span></span><br><span class="line">                p *= table[kpp][kp][k];</span><br><span class="line">                end = be + p;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                p *= table[kpp][kp][k];</span><br><span class="line">                be = end - p;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// cout&lt;&lt;&quot;s[i]&quot;&lt;&lt;s[i]&lt;&lt;endl;</span></span><br><span class="line">        <span class="comment">// cout&lt;&lt;&quot;kpp:&quot;&lt;&lt;kpp&lt;&lt;&quot; kp:&quot;&lt;&lt;kp&lt;&lt;&quot; k:&quot;&lt;&lt;k&lt;&lt;endl;</span></span><br><span class="line">        <span class="comment">// cout&lt;&lt;&quot;p监控:&quot;&lt;&lt;p&lt;&lt;endl;</span></span><br><span class="line">        <span class="comment">// cout&lt;&lt;&quot;be:  &quot;&lt;&lt;be&lt;&lt;endl;</span></span><br><span class="line">        <span class="comment">// cout&lt;&lt;&quot;end: &quot;&lt;&lt;end&lt;&lt;endl;</span></span><br><span class="line">    &#125;</span><br><span class="line">    l = <span class="built_in">ceil</span>(<span class="built_in">log</span>(<span class="number">1</span>/p)/<span class="built_in">log</span>(<span class="number">2</span>));</span><br><span class="line">    <span class="comment">// cout&lt;&lt;&quot;be:&quot;&lt;&lt;be&lt;&lt;&quot;end:&quot;&lt;&lt;end&lt;&lt;endl;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// double tp = 0.5*be + 0.5*end;</span></span><br><span class="line">    <span class="keyword">double</span> tp = <span class="number">0.01</span>*be + <span class="number">0.99</span>*end;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> tp2;</span><br><span class="line">    ans.<span class="built_in">resize</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;l;i++)&#123;</span><br><span class="line">        tp *= <span class="number">2</span>;</span><br><span class="line">        tp2 = (<span class="keyword">int</span>)tp;</span><br><span class="line">        tp -= tp2;</span><br><span class="line">        ans += <span class="built_in"><span class="keyword">char</span></span>(tp2+<span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;编码长度为: &quot;</span>&lt;&lt;l&lt;&lt;endl;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;编码结果为: &quot;</span>&lt;&lt;ans&lt;&lt;endl;</span><br><span class="line">    sl = <span class="built_in"><span class="keyword">int</span></span>(s.<span class="built_in">length</span>());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">decord</span><span class="params">()</span></span>&#123;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;\n译码: &quot;</span>&lt;&lt;endl;</span><br><span class="line">    <span class="keyword">double</span> res = <span class="number">0.0</span>;<span class="keyword">double</span> w = <span class="number">0.5</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;l;i++,w*=<span class="number">0.5</span>)&#123;</span><br><span class="line">        res += w*(ans[i]-<span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;译码选取的数字为:&quot;</span>&lt;&lt;res&lt;&lt;endl;</span><br><span class="line">    <span class="keyword">int</span> a=<span class="number">0</span>,b=<span class="number">0</span>;     <span class="comment">// 用a,b,c来记录下一个概率分布数组</span></span><br><span class="line">    <span class="keyword">double</span> p = <span class="number">1</span>;  <span class="comment">//还是需要记录一个p(概率长度),因为这里的table是通用映射表，需要加约束</span></span><br><span class="line">    t.<span class="built_in">resize</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">double</span> be = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;sl;i++)&#123;</span><br><span class="line">        <span class="comment">// 2019年4月27日20:52:03 发现还是不能仅跟长度对比啊，没有be，end不行</span></span><br><span class="line">        <span class="keyword">if</span>(i==<span class="number">0</span>)&#123;<span class="comment">// 记住左闭右开</span></span><br><span class="line">            <span class="keyword">if</span>(res&lt;<span class="number">1</span>/<span class="number">3.0</span>)&#123;t+=<span class="string">&#x27;a&#x27;</span>;a = <span class="number">1</span>;be = <span class="number">0.0</span>;&#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(res&lt;<span class="number">2</span>/<span class="number">3.0</span>)&#123;t+=<span class="string">&#x27;b&#x27;</span>; a = <span class="number">2</span>; be = <span class="number">1</span>/<span class="number">3.0</span>;&#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;t+=<span class="string">&#x27;c&#x27;</span>;a = <span class="number">3</span>; be = <span class="number">2</span>/<span class="number">3.0</span>;&#125;</span><br><span class="line">            p = <span class="number">1</span>/<span class="number">3.0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(i==<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(res &lt; be + p*table[a][<span class="number">1</span>][<span class="number">0</span>])&#123;<span class="comment">//be 不变</span></span><br><span class="line">                t += <span class="string">&#x27;a&#x27;</span>; b = <span class="number">1</span>;</span><br><span class="line">                p *= table[a][<span class="number">1</span>][<span class="number">0</span>];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(res &lt; be + p*(table[a][<span class="number">2</span>][<span class="number">0</span>]+table[a][<span class="number">1</span>][<span class="number">0</span>]))&#123;</span><br><span class="line">                t += <span class="string">&#x27;b&#x27;</span>; b = <span class="number">2</span>;</span><br><span class="line">                be += p*(table[a][<span class="number">1</span>][<span class="number">0</span>]);</span><br><span class="line">                <span class="comment">// be += p*table[a][2][0]; // 2019年4月27日21:49:18今天的bug也很抠脚</span></span><br><span class="line">                p *= table[a][<span class="number">2</span>][<span class="number">0</span>];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                t += <span class="string">&#x27;c&#x27;</span>; b = <span class="number">3</span>;</span><br><span class="line">                be += p*(table[a][<span class="number">1</span>][<span class="number">0</span>]+table[a][<span class="number">2</span>][<span class="number">0</span>]);</span><br><span class="line">                p *= table[a][<span class="number">3</span>][<span class="number">0</span>];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;<span class="comment">// eg: c/ab [1][2][3]   c/a [1][3][0]  a [1][0][0]自己开始的假设碰巧有一致性，下次还是要打草稿</span></span><br><span class="line">            <span class="comment">// 要先p*=table[a][b][1]再更新a,b</span></span><br><span class="line">            <span class="keyword">if</span>(res &lt; be + p*table[a][b][<span class="number">1</span>])&#123;</span><br><span class="line">                t += <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">                p*=table[a][b][<span class="number">1</span>];<span class="comment">// 更新a,b的值</span></span><br><span class="line">                a = b; b = <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(res &lt; be + p*(table[a][b][<span class="number">2</span>]+table[a][b][<span class="number">1</span>]))&#123;</span><br><span class="line">                t += <span class="string">&#x27;b&#x27;</span>;</span><br><span class="line">                be += p*table[a][b][<span class="number">1</span>];</span><br><span class="line">                p*=table[a][b][<span class="number">2</span>];</span><br><span class="line">                a = b; b = <span class="number">2</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                t += <span class="string">&#x27;c&#x27;</span>;</span><br><span class="line">                be += p*(table[a][b][<span class="number">2</span>]+table[a][b][<span class="number">1</span>]);</span><br><span class="line">                p*=table[a][b][<span class="number">3</span>];</span><br><span class="line">                a = b; b = <span class="number">3</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;译码结果为:&quot;</span>&lt;&lt;t&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> <span class="keyword">const</span> *argv[])</span></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">Init</span>();</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;请输入需要编码的字符序列(编码符号为a,b,c):&quot;</span>&lt;&lt;endl;</span><br><span class="line">    <span class="comment">// cout&lt;&lt;table[1][1][1]&lt;&lt;endl;</span></span><br><span class="line">    <span class="keyword">while</span>(cin&gt;&gt;s&amp;&amp;s[<span class="number">0</span>]!=<span class="string">&#x27;#&#x27;</span>)&#123;</span><br><span class="line">        <span class="built_in">encord</span>();</span><br><span class="line">        <span class="built_in">decord</span>();</span><br><span class="line">        string tstr;</span><br><span class="line">        tstr += ((s&lt;t)||(s&gt;t)) == <span class="number">0</span> ? <span class="string">&quot;恭喜你,译码和源码完全一样哦&quot;</span>:<span class="string">&quot;Sorry,可能长度超出了默认精度范围了哦,有空试试高精度吧&quot;</span>;</span><br><span class="line">        cout&lt;&lt;tstr&lt;&lt;<span class="string">&quot;  此时源码长度为: &quot;</span>&lt;&lt;sl&lt;&lt;endl;</span><br><span class="line">        cout&lt;&lt;<span class="string">&quot;\n是否验证下一个字符序列,是则输入,否则输入#:&quot;</span>&lt;&lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-完全统计模型的算术编码代码实现"><a href="#2-完全统计模型的算术编码代码实现" class="headerlink" title="2.完全统计模型的算术编码代码实现"></a>2.完全统计模型的算术编码代码实现</h3><p>设信源可能输出的符号是26个字母，且每个字母出现的概率未知，试编写程序可以对任意字母序列（如presentation）进行完全统计模型的算术编码，并与香农编码进行码长比较（比值）。<br>思路:对输入的整个串做分析，然后生成特定串的概率映射表，从而可以开始用最基础的Algorithm Code做题了.</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">设信源可能输出的符号是26个字母，且每个字母出现的概率未知，试编写程序可以对任意字母序列</span></span><br><span class="line"><span class="comment">（如presentation）进行完全统计模型的算术编码，并与香农编码进行码长比较（比值）。</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">2019年4月28日19:44:50 总算找完了bug，发现真的有精度问题，如果p后面变得很小的时候，那判断的时候很可能去掉几位判断</span></span><br><span class="line"><span class="comment">最近这几天事情比较多，所以就不写高精度的小数计算了</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> x first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> y second</span></span><br><span class="line">string s, ans, t;</span><br><span class="line"><span class="keyword">int</span> num[<span class="number">26</span>];</span><br><span class="line"><span class="keyword">int</span> Myhash[<span class="number">26</span>];</span><br><span class="line"><span class="keyword">char</span> Myhash2[<span class="number">26</span>];</span><br><span class="line"><span class="keyword">int</span> XNlen;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">double</span>, pair&lt;<span class="keyword">double</span>, <span class="keyword">double</span>&gt;&gt; Node;</span><br><span class="line">vector&lt;Node&gt; p;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> <span class="keyword">const</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;请输入需要编码的字符序列(编码符号为小写哦):&quot;</span>&lt;&lt;endl;</span><br><span class="line">    <span class="keyword">while</span> (cin &gt;&gt; s&amp;&amp;s[<span class="number">0</span>]!=<span class="string">&#x27;#&#x27;</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        XNlen = <span class="number">0</span>;</span><br><span class="line">        p.<span class="built_in">clear</span>();</span><br><span class="line">        <span class="built_in">memset</span>(num, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(num));</span><br><span class="line">        <span class="built_in">memset</span>(Myhash, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(Myhash));</span><br><span class="line">        <span class="built_in">memset</span>(Myhash2, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(Myhash2));</span><br><span class="line">        <span class="keyword">int</span> n = (<span class="keyword">int</span>)s.<span class="built_in">length</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            num[s[i] - <span class="string">&#x27;a&#x27;</span>]++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Init</span></span><br><span class="line">        <span class="comment">// 先建立通用的概率，然后再进行讨论</span></span><br><span class="line">        <span class="comment">// pair&lt;possibility,&lt;be,end&gt;&gt; + hash[char] = order</span></span><br><span class="line">        <span class="keyword">double</span> be = <span class="number">0</span>, end = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> k = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">double</span> temd;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">26</span>; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (num[i])</span><br><span class="line">            &#123; <span class="comment">// 不为0说明有值的</span></span><br><span class="line">                be = end;</span><br><span class="line">                temd = (<span class="keyword">double</span>)num[i] / n;</span><br><span class="line">                end = be + temd;</span><br><span class="line">                XNlen += <span class="built_in">ceil</span>(<span class="built_in">log</span>(<span class="number">1</span> / temd) / <span class="built_in">log</span>(<span class="number">2</span>)) * num[i];</span><br><span class="line">                p.<span class="built_in">pb</span>(&#123;temd, &#123;be, end&#125;&#125;);</span><br><span class="line">                Myhash[i] = k;</span><br><span class="line">                Myhash2[k] = <span class="string">&#x27;a&#x27;</span> + i;</span><br><span class="line">                <span class="comment">//在vscode debug结果令人震惊的时候还是得手动</span></span><br><span class="line">                <span class="comment">// cout&lt;&lt;&quot;be: &quot;&lt;&lt;be&lt;&lt;&quot; end: &quot;&lt;&lt;end&lt;&lt;endl;</span></span><br><span class="line">                k++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// p的构建好像出了问题，2019年4月28日12:34:18 来测试一下  最后发现没有出错...</span></span><br><span class="line">        <span class="comment">// for (int i = 0; i &lt; (int)p.size();i++)&#123;</span></span><br><span class="line">        <span class="comment">//     cout &lt;&lt; &quot;p[i].x:&quot; &lt;&lt; p[i].x &lt;&lt; &quot; p[i].y.x:&quot; &lt;&lt; p[i].y.x &lt;&lt; &quot; p[i].y.y:&quot; &lt;&lt; p[i].y.y &lt;&lt; endl;</span></span><br><span class="line">        <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// encode</span></span><br><span class="line">        <span class="keyword">double</span> pos = <span class="number">1</span>;</span><br><span class="line">        be = <span class="number">0</span>, end = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)&#123;</span><br><span class="line">            <span class="keyword">int</span> tem = Myhash[s[i] - <span class="string">&#x27;a&#x27;</span>];</span><br><span class="line">            be += pos * p[tem].y.x;</span><br><span class="line">            <span class="comment">// end += pos * p[tem].y.y;  昨天的bug   今天又错了，就是不能这样操作因为可能第一次就有end = 1，可以不维护end,可以的</span></span><br><span class="line">            pos *= p[tem].x;</span><br><span class="line">            <span class="comment">// cout &lt;&lt; &quot;tem:&quot; &lt;&lt; tem &lt;&lt; &quot; p[tem].y.x&quot; &lt;&lt; p[tem].y.x &lt;&lt; &quot; p[tem].y.y:&quot; &lt;&lt;p[tem].y.y &lt;&lt; endl;</span></span><br><span class="line">            <span class="comment">// cout &lt;&lt; &quot;be:&quot; &lt;&lt; be &lt;&lt; &quot; end:&quot; &lt;&lt; end &lt;&lt; endl;</span></span><br><span class="line">            <span class="comment">// cout &lt;&lt; &quot;pos监控: &quot; &lt;&lt; pos &lt;&lt; endl;</span></span><br><span class="line">        &#125;</span><br><span class="line">        end = be + pos;</span><br><span class="line">        <span class="comment">// cout &lt;&lt; &quot;be:&quot; &lt;&lt; be &lt;&lt; &quot; end:&quot; &lt;&lt; end &lt;&lt; endl;</span></span><br><span class="line">        <span class="comment">// cout &lt;&lt; &quot;pos监控: &quot; &lt;&lt; pos &lt;&lt; endl;</span></span><br><span class="line">        <span class="keyword">int</span> l = <span class="built_in">ceil</span>(<span class="built_in">log</span>(<span class="number">1</span> / pos) / <span class="built_in">log</span>(<span class="number">2</span>));</span><br><span class="line">        <span class="keyword">double</span> tp = <span class="number">0.01</span> * be + <span class="number">0.99</span> * end;</span><br><span class="line">        <span class="keyword">int</span> tp2;</span><br><span class="line">        ans.<span class="built_in">resize</span>(<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; l; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            tp *= <span class="number">2</span>;</span><br><span class="line">            tp2 = (<span class="keyword">int</span>)tp;</span><br><span class="line">            tp -= tp2;</span><br><span class="line">            ans += <span class="built_in"><span class="keyword">char</span></span>(tp2 + <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;编码长度为: &quot;</span> &lt;&lt; l &lt;&lt; <span class="string">&quot; 香农编码长度为:&quot;</span> &lt;&lt; XNlen &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">if</span> (l &lt; XNlen)</span><br><span class="line">        &#123;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;WOW,Algorithm Code 果然名不虚传！&quot;</span> &lt;&lt; endl;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;编码结果为: &quot;</span> &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">int</span> sl = <span class="built_in"><span class="keyword">int</span></span>(s.<span class="built_in">length</span>());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 译码</span></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;\n译码: &quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">double</span> res = <span class="number">0.0</span>;</span><br><span class="line">        <span class="keyword">double</span> w = <span class="number">0.5</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; l; i++, w *= <span class="number">0.5</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            res += w * (ans[i] - <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;译码选取的数字为:&quot;</span> &lt;&lt; res &lt;&lt; endl;</span><br><span class="line">        pos = <span class="number">1</span>;</span><br><span class="line">        t.<span class="built_in">resize</span>(<span class="number">0</span>);</span><br><span class="line">        be = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; sl; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; k; j++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">// cout &lt;&lt; &quot;p[j].y.x:&quot; &lt;&lt; pos*p[j].y.x &lt;&lt; &quot;p[j].y.y&quot; &lt;&lt; pos*p[j].y.y &lt;&lt; endl;</span></span><br><span class="line">                <span class="comment">// if (res &gt;= pos * p[j].y.x &amp;&amp; res &lt; pos * p[j].y.y)  // mdzz,这个p值会越来越小，所以根本不能用 这样的比较，必须还是要和be和end比较    1. 没有借鉴昨天的后果  2. 没有思考清楚参考系的结果</span></span><br><span class="line">                <span class="keyword">if</span> (res &gt;= be + pos * p[j].y.x &amp;&amp; res &lt; be + pos * p[j].y.y)</span><br><span class="line">                &#123;</span><br><span class="line">                    t += Myhash2[j]; <span class="comment">// 这里应该是j对应的反hash</span></span><br><span class="line">                    be += pos * p[j].y.x;</span><br><span class="line">                    pos *= p[j].x;</span><br><span class="line">                    <span class="keyword">break</span>;<span class="comment">// 不跳出可能再二次迭代出错</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;译码结果为: \n&quot;</span> &lt;&lt; t &lt;&lt; endl;</span><br><span class="line">        string tstr;</span><br><span class="line">        tstr += ((s&lt;t)||(s&gt;t)) == <span class="number">0</span> ? <span class="string">&quot;恭喜你,译码和源码完全一样哦&quot;</span>:<span class="string">&quot;Sorry,可能长度超出了默认精度范围了哦,有空试试高精度吧&quot;</span>;</span><br><span class="line">        cout&lt;&lt;tstr&lt;&lt;<span class="string">&quot;  此时源码长度为: &quot;</span>&lt;&lt;sl&lt;&lt;endl;</span><br><span class="line">        cout&lt;&lt;<span class="string">&quot;\n是否验证下一个字符序列,是则输入,否则输入#:&quot;</span>&lt;&lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-完全统计模型的算术编码代码实现–无限长不报错版"><a href="#3-完全统计模型的算术编码代码实现–无限长不报错版" class="headerlink" title="3.完全统计模型的算术编码代码实现–无限长不报错版"></a>3.完全统计模型的算术编码代码实现–无限长不报错版</h3><p>思路：<strong>上面的代码在长度达到20多位的时候就可能会报错了，所以也就是说在10位以内绝对不会报错，所以我们可以把源码分成8个一串的批次处理，这样就可以使的整个过程完成没有错误了</strong></p>
<ul>
<li>这种方法只要不溢出string的内存,理论上来说是可以实现无限长编码的</li>
<li>网上查了一下，发现string最大4G</li>
<li>4GB是单个程序内存寻址的极限，因此也是CString的极限。</li>
<li>绝对够你用了(所以一个2K电影的话就分两个string吧,23333)</li>
<li>1.自己昨天没有分成函数模块写，导致了自己改代码改的有点难受，于是花了2个小时改代码(然后还是没有改成函数版，因为这几天太忙了，所以就不改了，读者见谅)(小编不会说自己因为写这个分享错过了晚饭时间，所以不想改成模块化了可能主要是想早点分享给你们(lan<del>bu yao jiao bian</del>))</li>
<li>2.对于tp的取值思考::::取[     ]最终区段的左边会因为迭代操作而一直左偏，所以精度不行，所以选最右边的样子exp积累:<ul>
<li>1、 以后一定要函数化模块</li>
<li>2、 昨天想到的只是精度问题，只是想着暴力处理扩大精度，却没有思考的扩大精度的本质其实就是分块操作</li>
<li>(所以分布式+集群真是大道至简，积累成就无限的可能)</li>
</ul>
</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> pb push_back</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> x first</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> y second</span></span><br><span class="line">string source, ans, t;</span><br><span class="line"><span class="keyword">int</span> num[<span class="number">26</span>];</span><br><span class="line"><span class="keyword">int</span> Myhash[<span class="number">26</span>];</span><br><span class="line"><span class="keyword">char</span> Myhash2[<span class="number">26</span>];</span><br><span class="line"><span class="keyword">int</span> XNlen;</span><br><span class="line"><span class="keyword">typedef</span> pair&lt;<span class="keyword">double</span>, pair&lt;<span class="keyword">double</span>, <span class="keyword">double</span>&gt;&gt; Node;</span><br><span class="line">vector&lt;Node&gt; p;</span><br><span class="line"><span class="keyword">int</span> l;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> len = <span class="built_in"><span class="keyword">int</span></span>(source.<span class="built_in">length</span>());</span><br><span class="line">    <span class="keyword">int</span> last = <span class="number">0</span>,binlast=<span class="number">0</span>;<span class="comment">// 一开始没有想到binlast!</span></span><br><span class="line">    <span class="keyword">while</span>(len)&#123;</span><br><span class="line">        <span class="keyword">int</span> slen = len &gt;= <span class="number">8</span>? <span class="number">8</span> : len;</span><br><span class="line">        string s = source.<span class="built_in">substr</span>(last,slen);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// last += slen;</span></span><br><span class="line">        <span class="comment">// len -= slen;   // 这两个要在最最最后才搞，否则出错</span></span><br><span class="line">        <span class="comment">// string s = source.substr(last,slen);// mdzz 写在这</span></span><br><span class="line">        cout&lt;&lt;<span class="string">&quot;s:&quot;</span>&lt;&lt;s&lt;&lt;endl;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        p.<span class="built_in">clear</span>();</span><br><span class="line">        <span class="built_in">memset</span>(num, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(num));</span><br><span class="line">        <span class="built_in">memset</span>(Myhash, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(Myhash));</span><br><span class="line">        <span class="built_in">memset</span>(Myhash2, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(Myhash2));</span><br><span class="line">        <span class="keyword">int</span> n = (<span class="keyword">int</span>)s.<span class="built_in">length</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            num[s[i] - <span class="string">&#x27;a&#x27;</span>]++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Init</span></span><br><span class="line">        <span class="comment">// 先建立通用的概率，然后再进行讨论</span></span><br><span class="line">        <span class="comment">// pair&lt;possibility,&lt;be,end&gt;&gt; + hash[char] = order</span></span><br><span class="line">        <span class="keyword">double</span> be = <span class="number">0</span>, end = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> k = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">double</span> temd;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">26</span>; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (num[i])</span><br><span class="line">            &#123; <span class="comment">// 不为0说明有值的</span></span><br><span class="line">                be = end;</span><br><span class="line">                temd = (<span class="keyword">double</span>)num[i] / n;</span><br><span class="line">                end = be + temd;</span><br><span class="line">                XNlen += <span class="built_in">ceil</span>(<span class="built_in">log</span>(<span class="number">1</span> / temd) / <span class="built_in">log</span>(<span class="number">2</span>)) * num[i];</span><br><span class="line">                p.<span class="built_in">pb</span>(&#123;temd, &#123;be, end&#125;&#125;);</span><br><span class="line">                Myhash[i] = k;</span><br><span class="line">                Myhash2[k] = <span class="string">&#x27;a&#x27;</span> + i;</span><br><span class="line">                k++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// p的构建好像出了问题，2019年4月28日12:34:18 来测试一下  最后发现没有出错...</span></span><br><span class="line">        <span class="comment">// for (int i = 0; i &lt; (int)p.size();i++)&#123;</span></span><br><span class="line">        <span class="comment">//     cout &lt;&lt; &quot;p[i].x:&quot; &lt;&lt; p[i].x &lt;&lt; &quot; p[i].y.x:&quot; &lt;&lt; p[i].y.x &lt;&lt; &quot; p[i].y.y:&quot; &lt;&lt; p[i].y.y &lt;&lt; endl;</span></span><br><span class="line">        <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// encode</span></span><br><span class="line">        <span class="keyword">double</span> pos = <span class="number">1</span>;</span><br><span class="line">        be = <span class="number">0</span>, end = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)&#123;</span><br><span class="line">            <span class="keyword">int</span> tem = Myhash[s[i] - <span class="string">&#x27;a&#x27;</span>];</span><br><span class="line">            be += pos * p[tem].y.x;</span><br><span class="line">            <span class="comment">// end += pos * p[tem].y.y;  昨天的bug   今天又错了，就是不能这样操作因为可能第一次就有end = 1，可以不维护end,可以的</span></span><br><span class="line">            pos *= p[tem].x;</span><br><span class="line">            <span class="comment">// cout &lt;&lt; &quot;tem:&quot; &lt;&lt; tem &lt;&lt; &quot; p[tem].y.x&quot; &lt;&lt; p[tem].y.x &lt;&lt; &quot; p[tem].y.y:&quot; &lt;&lt;p[tem].y.y &lt;&lt; endl;</span></span><br><span class="line">            <span class="comment">// cout &lt;&lt; &quot;be:&quot; &lt;&lt; be &lt;&lt; &quot; end:&quot; &lt;&lt; end &lt;&lt; endl;</span></span><br><span class="line">            <span class="comment">// cout &lt;&lt; &quot;pos监控: &quot; &lt;&lt; pos &lt;&lt; endl;</span></span><br><span class="line">        &#125;</span><br><span class="line">        end = be + pos;</span><br><span class="line">        <span class="comment">// cout &lt;&lt; &quot;be:&quot; &lt;&lt; be &lt;&lt; &quot; end:&quot; &lt;&lt; end &lt;&lt; endl;</span></span><br><span class="line">        <span class="comment">// cout &lt;&lt; &quot;pos监控: &quot; &lt;&lt; pos &lt;&lt; endl;</span></span><br><span class="line">        l = <span class="built_in">ceil</span>(<span class="built_in">log</span>(<span class="number">1</span> / pos) / <span class="built_in">log</span>(<span class="number">2</span>));</span><br><span class="line">        <span class="keyword">double</span> tp = <span class="number">0.01</span> * be + <span class="number">0.99</span> * end;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> tp2;</span><br><span class="line">        <span class="comment">// ans.resize(0);</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; l; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            tp *= <span class="number">2</span>;</span><br><span class="line">            tp2 = (<span class="keyword">int</span>)tp;</span><br><span class="line">            tp -= tp2;</span><br><span class="line">            ans += <span class="built_in"><span class="keyword">char</span></span>(tp2 + <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;编码结果为: &quot;</span> &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">int</span> sl = <span class="built_in"><span class="keyword">int</span></span>(s.<span class="built_in">length</span>());</span><br><span class="line">        cout&lt;&lt;<span class="string">&quot;当前串长:&quot;</span>&lt;&lt;sl&lt;&lt;endl;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 译码</span></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;\n译码: &quot;</span> &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">double</span> res = <span class="number">0.0</span>;</span><br><span class="line">        <span class="keyword">double</span> w = <span class="number">0.5</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = binlast; i &lt; binlast+ l ; i++, w *= <span class="number">0.5</span>) <span class="comment">// 要用0 1 码长搞出来</span></span><br><span class="line">        &#123;</span><br><span class="line">            res += w * (ans[i] - <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;译码选取的数字为:&quot;</span> &lt;&lt; res &lt;&lt; endl;</span><br><span class="line">        pos = <span class="number">1</span>;</span><br><span class="line">        <span class="comment">// t.resize(0);</span></span><br><span class="line">        be = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; sl; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; k; j++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">// cout &lt;&lt; &quot;p[j].y.x:&quot; &lt;&lt; pos*p[j].y.x &lt;&lt; &quot;p[j].y.y&quot; &lt;&lt; pos*p[j].y.y &lt;&lt; endl;</span></span><br><span class="line">                <span class="comment">// if (res &gt;= pos * p[j].y.x &amp;&amp; res &lt; pos * p[j].y.y)  // mdzz,这个p值会越来越小，所以根本不能用 这样的比较，必须还是要和be和end比较    1. 没有借鉴昨天的后果  2. 没有思考清楚参考系的结果</span></span><br><span class="line">                <span class="keyword">if</span> (res &gt;= be + pos * p[j].y.x &amp;&amp; res &lt; be + pos * p[j].y.y)</span><br><span class="line">                &#123;</span><br><span class="line">                    t += Myhash2[j]; <span class="comment">// 这里应该是j对应的反hash</span></span><br><span class="line">                    be += pos * p[j].y.x;</span><br><span class="line">                    pos *= p[j].x;</span><br><span class="line">                    <span class="keyword">break</span>;<span class="comment">// 不跳出可能再二次迭代出错</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        cout&lt;&lt;<span class="string">&quot;中间源码为：&quot;</span>&lt;&lt;s&lt;&lt;endl;</span><br><span class="line">        cout&lt;&lt;<span class="string">&quot;中间译码为：&quot;</span>&lt;&lt;t.<span class="built_in">substr</span>(last,slen)&lt;&lt;endl;</span><br><span class="line">        last += slen;</span><br><span class="line">        len -= slen;</span><br><span class="line">        binlast += l;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> <span class="keyword">const</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="literal">false</span>);</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;请输入需要编码的字符序列(编码符号为小写哦):&quot;</span>&lt;&lt;endl;</span><br><span class="line">    <span class="keyword">while</span>(cin&gt;&gt;source&amp;&amp;source[<span class="number">0</span>]!=<span class="string">&#x27;#&#x27;</span>) &#123;</span><br><span class="line">        XNlen = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        t.<span class="built_in">resize</span>(<span class="number">0</span>);</span><br><span class="line">        ans.<span class="built_in">resize</span>(<span class="number">0</span>);</span><br><span class="line">        <span class="built_in">solve</span>();</span><br><span class="line">        cout&lt;&lt;<span class="string">&quot;编码为：&quot;</span>&lt;&lt;ans&lt;&lt;<span class="string">&quot;\n编码长度是：&quot;</span>&lt;&lt;ans.<span class="built_in">length</span>()&lt;&lt;endl;</span><br><span class="line">        cout&lt;&lt;<span class="string">&quot;译码为:&quot;</span>&lt;&lt;t&lt;&lt;endl;</span><br><span class="line">        <span class="comment">// 与香农比较</span></span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;编码长度为: &quot;</span> &lt;&lt; l &lt;&lt; <span class="string">&quot; 香农编码长度为:&quot;</span> &lt;&lt; XNlen &lt;&lt; endl;</span><br><span class="line">        <span class="keyword">if</span> (l &lt; XNlen)</span><br><span class="line">        &#123;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;WOW,Algorithm Code 果然名不虚传！&quot;</span> &lt;&lt; endl;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        string tstr;</span><br><span class="line">        tstr += ((source&lt;t)||(source&gt;t)) == <span class="number">0</span> ? <span class="string">&quot;恭喜你,译码和源码完全一样哦&quot;</span>:<span class="string">&quot;Sorry,可能长度超出了默认精度范围了哦,有空试试高精度吧&quot;</span>;</span><br><span class="line">        cout&lt;&lt;tstr&lt;&lt;<span class="string">&quot;  此时源码长度为: &quot;</span>&lt;&lt;<span class="built_in"><span class="keyword">int</span></span>(source.<span class="built_in">length</span>())&lt;&lt;endl;</span><br><span class="line">        cout&lt;&lt;<span class="string">&quot;\n是否验证下一个字符序列,是则输入,否则输入#:&quot;</span>&lt;&lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="更新"><a href="#更新" class="headerlink" title="更新"></a>更新</h1><p>2019年10月11日19:42:24  更新了文章,发现主分类不用写updated时间也会由插件记录更新时间,但是我不知道记录在哪了,所以写一下比较好</p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="reward-container">
  <div></div>
  <button>
    赞赏
  </button>
  <div class="post-reward">
      <div>
        <img src="/images/alipay.jpg" alt="单林敏 支付宝">
        <span>支付宝</span>
      </div>

  </div>
</div>

          <div class="post-tags">
              <a href="/tags/ARST/" rel="tag"># ARST</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/%E5%84%92%E5%AE%B6%E4%BF%AE%E8%BA%AB%E4%B9%8B%E9%81%93-2019%E6%98%A5%E6%9C%9F%E4%B8%AD%E8%80%83%E8%AF%95%E7%AD%94%E6%A1%88/" rel="prev" title="儒家修身之道 - 2019春期中考试答案">
                  <i class="fa fa-chevron-left"></i> 儒家修身之道 - 2019春期中考试答案
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/ARST%E6%89%93%E5%8D%A1%E7%AC%AC%E4%B8%89%E5%91%A8-3-521/" rel="next" title="ARST打卡第三周(3/521)">
                  ARST打卡第三周(3/521) <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments gitalk-container"></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">湘ICP备19025607号 </a>
  </div>

<div class="copyright">
  &copy; 2019 – 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">单林敏</span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@next-theme/pjax@0.5.0/pjax.min.js" integrity="sha256-3NkoLDrmHLTYj7csHIZSr0MHAFTXth7Ua/DDt4MRUAg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/lozad@1.16.0/dist/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script><script src="/js/pjax.js"></script>

  
<script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>



  <script src="/js/third-party/fancybox.js"></script>


  
  <script data-pjax async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




  

  <script class="next-config" data-name="enableMath" type="application/json">false</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js","integrity":"sha256-r+3itOMtGGjap0x+10hu6jW/gZCzxHsoKrOd7gyRSGY="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.css" integrity="sha256-AJnUHL7dBv6PGaeyPQJcgQPDjt/Hn/PvYZde1iqfp8U=" crossorigin="anonymous">

<script class="next-config" data-name="gitalk" type="application/json">{"enable":true,"github_id":"wolfdan666","repo":"gitalk_commont","client_id":"2934cb0fdcabc560461e","client_secret":"937e7b77dcdfd83f6a89f4a9b9447a76a54bc764","admin_user":"wolfdan666","distraction_free_mode":true,"proxy":"https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token","language":"zh-CN","js":{"url":"https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.min.js","integrity":"sha256-Pmj85ojLaPOWwRtlMJwmezB/Qg8BzvJp5eTzvXaYAfA="},"path_md5":"bbcb8b5c04a26633003a2998405e380b"}</script>
<script src="/js/third-party/comments/gitalk.js"></script>

</body>
</html>
